<!DOCTYPE html>
<html>
<head>
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">
  
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
  
  <link rel="shortcut icon" type="image/png" href="https://cdn2.iconfinder.com/data/icons/user-interface-essentials-outline/48/ui-49-512.png"/>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js">
  </script>
<link rel="stylesheet" href="/css/customerdata.css" >
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<style>
  body {
    margin: 0;
   
  }
  
  .header {
    background-color: #f1f1f1;
    padding: 30px;
    text-align: center;
  }
  
  #navbar {
    z-index: 150;
    overflow: hidden;
    background-color: #111;
  }
  
  #navbar a {
    float: right;
    display: block;
    color: #f2f2f2;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
    font-size: 17px;
  }
  .testtttt {
  float: right;
  overflow: hidden;
}

.testtttt .dropbtn {
  font-size: 16px;  
  border: none;
  outline: none;
  color: white;
  padding: 14px 16px;
  background-color: inherit;
  font-family: inherit;
  margin: 0;
}

.navbar a:hover, .testtttt:hover .dropbtn {
  background-color: red;
}

.dropdown-content {
  display: none;
  position: absolute;
 background-color: #111;
  min-width: 100px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.dropdown-content a {
  float: none;
  color: white;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.dropdown-content a:hover {
  background-color: #ddd;
}

.testtttt:hover .dropdown-content {
  display: block;
}
  #navbar a:hover {
    background-color: #ddd;
    color: black;
  }
  
  #navbar a.active {
    
    color: white;
  }
  
  .content {
    padding: 16px;
  }
  
  .sticky {
    position: fixed;
    top: 0;
    width: 100%;
  }
  
  .sticky + .content {
    padding-top: 60px;
  }
  .main{
    padding: 80px 10px 15px;
  }
  </style>
  <style>
        body {font-family: Arial, Helvetica, sans-serif;}
        * {box-sizing: border-box;}
        
        /* Button used to open the contact form - fixed at the bottom of the page */
        .open-button {
          background-color: #555;
          color: white;
          padding: 16px 20px;
          border: none;
          cursor: pointer;
          opacity: 0.8;
          bottom: 23px;
          right: 28px;
          width: 150px;
        }
        
        /* The popup form - hidden by default */
        .form-popup {
          display: none;
          position: fixed;
          bottom: 0;
          right: 15px;
          border: 3px solid #f1f1f1;
          z-index: 9;
        }
        
        /* Add styles to the form container */
        .form-container {
          max-width: 300px;
          padding: 10px;
          background-color: white;
        }
        
        /* Full-width input fields */
        .form-container input[type=text], .form-container input[type=password] {
          width: 100%;
          padding: 15px;
          margin: 5px 0 22px 0;
          border: none;
          background: #f1f1f1;
        }
        
        /* When the inputs get focus, do something */
        .form-container input[type=text]:focus, .form-container input[type=password]:focus {
          background-color: #ddd;
          outline: none;
        }
        
        /* Set a style for the submit/login button */
        .form-container .btn {
          background-color: #4CAF50;
          color: white;
          padding: 16px 20px;
          border: none;
          cursor: pointer;
          width: 100%;
          margin-bottom:10px;
          opacity: 0.8;
        }
        
        /* Add a red background color to the cancel button */
        .form-container .cancel {
          background-color: red;
        }
        
        /* Add some hover effects to buttons */
        .form-container .btn:hover, .open-button:hover {
          opacity: 1;
        }
        </style>
  <div id="navbar">
    <div class="testtttt">
  
    <button class="dropbtn">Vishal460 
      
    </button>
    <div class="dropdown-content">
      <a href="/logout">Logout</a>
     
    </div>
  </div> 
    
  </div>
<body bgcolor="#E6E6FA">
  
<div class="sidebar">
  <a><div id="google_translate_element"></div></a>
  <a<button class="btn"><i class="fa fa-whatsapp"></i></button></a>
  <a href="/whatsappdatafetch"><i class="fa fa-fw fa-home"></i> Home</a>
  <a href="/changepassword"><i class="fa fa-fw fa-wrench"></i> change password</a>
  <a href="/products"><i class="fa fa-fw fa-user"></i>Add a customer</a>
  <a href="/dowhatsapp"><i class="fa fa-fw fa-envelope"></i> send whatsapp message</a>
  <a href="/ordercrm"><i class="fa fa-fw fa-envelope"></i>Orders CRM</a>
  <a href="#contact"><i class="fa fa-fw fa-envelope"></i>Plans & Pricing</a>
  <a href="#contact"><i class="fa fa-fw fa-envelope"></i>FAQs</a>
  <a href="#contact"><i class="fa fa-fw fa-envelope"></i>Email Support</a>
</div>

<div  class="main"> 
  <aside> 
 <table id="myTable" width="1000" height="100" border="1px">
  
    <caption><b>ORDER LIST</b></caption>
    <thead>
    <tr>
      <td><b>
          <div class="dropdown">
            <button class="dropbtn">action</button>
            <div class="dropdown-content">
              <a> <input type="checkbox" name="selectedfordelete" id="select_all" />Select all</a>
              <a> <button type="button" class="button" name="deleteselected">delete</button></a>
              <a> <button type="button" name="deleteselected">delete</button></a>
            </div>
          </div>
        </b></td>
        <td> <b>Order, User </b> </td>
        <td><b>Date</b></td>
        <td><b>Amount</b></td>
        <td><b>Status</b></td>
        <td><b>Tags</b></td>
        <td><b>WhatsApp</b></td> 
    </tr>
    </thead>
    <tfoot>
            <tr>
                    <td><b>
                        <div class="dropdown">
                          <button class="dropbtn">action</button>
                          <div class="dropdown-content">
                            <a> <input type="checkbox" name="selectedfordelete" id="select_all" />Select all</a>
                            <a> <button type="button" class="button" name="deleteselected">delete</button></a>
                            <a> <button type="button" name="deleteselected">delete</button></a>
                          </div>
                        </div>
                      </b></td>
                      <td> <b>Order, User </b> </td>
                      <td><b>Date</b></td>
                      <td><b>Amount</b></td>
                      <td><b>Status</b></td>
                      <td><b>Tags</b></td>
                      <td><b>WhatsApp</b></td>
                      
                      
                  </tr>
    </tfoot>
    <tbody>
         <% for (var i = 0; i < datalen;  i++ ) { %>
    <tr>
      <td><b><input type="checkbox" name="checkdelete" value=""><br></b></td>
      <td> <b><%= data[i].customer.first_name %></b> </td>
      <td><b><%=data[i].customer.created_at %></b></td>
      <td><b><%= data[i].total_line_items_price %></b></td>
      <td><b><%= data[i].financial_status %></b></td>
      <td><b>tags</b></td>
      <td><b><button class="open-button" onclick="openForm('<%= data[i].customer.phone %>')">Send Message</button>
        <div class="form-popup" id="myForm">
                <form action="/whatsapp"  class="form-container" method="POST">
                    <!-- <input type="string" name="from" id="from" placeholder="from"/><p></p><br></br> -->
                   <input type="string" value="19354345" name="to" id="to" placeholder="to"readOnly/><p></p><br></br>
                   <textarea rows="4" cols="25" name="comment" ></textarea><p></p><br></br>
                   <input type="submit" class="btn" value="submit" /> 
                   <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
                   </form>
              </div>
     </b></td>
    </tr>
    
    <% } %>
  </tbody>
  </table>
  
</div>
     
</body>
<script>
        function openForm(data) {
            console.log(data)
            
          document.getElementById("myForm").style.display = "block";
          document.getElementById("to").value = data;
        }
        
        function closeForm() {
          document.getElementById("myForm").style.display = "none";
        }
        </script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
<script>
$(document).ready( function () {
    $('#myTable').DataTable();
} );
</script>
<script>
  window.onscroll = function() {myFunction()};
  
  var navbar = document.getElementById("navbar");
  var sticky = navbar.offsetTop;
  
  function myFunction() {
    if (window.pageYOffset >= sticky) {
      navbar.classList.add("sticky")
    } else {
      navbar.classList.remove("sticky");
    }
  }
  </script>
  <script type="text/javascript"> 
    function googleTranslateElementInit() {
   new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
   }
   $(document).ready(function ()
    {

        $("button[name='deleteselected']").click(function ()
         {
          var r = confirm("Are you sure do you really want to delete these customers ?");
          if(r==true)
          {

            var favorite = [];
             $.each($("input[name='checkdelete']:checked"), function ()
              {
                 favorite.push($(this).val());

        //Prevent the default submit
              });
                   $('#loading').css('display', 'block');
                   $.ajax({
                   type: 'POST',
                   url: '/deletecustomercheckbox',
                   data: { data: favorite },
                   success: function (data) {
                   console.log("data is :" + data)
                   if (data === "noerror")
                    {
                       $('#loading').css('display', 'none')
                       location.href = "/customerdatafetch?msg=deleted successfully"
                    }

          // location.reload(true);
          // res.redirect('/customerdatafetch?msg=deleted successfully');        
        }
      });
    }
    else{
     var txt = "You pressed Cancel!";
    }
    });
    
  });


  $('#select_all').click(function () {
    if (this.checked) {
      $("input[name='checkdelete']").each(function () {
        this.checked = true;
      });
    } else {
      $("input[name='checkdelete']").each(function () {
        this.checked = false;
      });
    }


  });
 </script>
 
 <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
 
</html>














